<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>TODO List</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">


    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">


    <link href="http://fonts.googleapis.com/css?family=Days+One" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">


    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/general.css" rel="stylesheet">

    <script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="tall">
    <div class="row-fluid" style="">
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    </a>
                    <a class="brand" href="#">TODOList</a>
                    <ul class="nav pull-right">
                        <li class="divider-vertical"></li>

                        <li><a href="/logout">Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid tall" style="height: 80%;">
        <div class="row-fluid tall">
            <div class="span3 tall">
                <div class="sidewell todoLists tall">
                <div id="listsWell" ></div>
                <div class="listsAddDelete">
                    <button id="exportList" class="btn btn-primary">Exportar Listas</button>
                    <button href="#newList" class="btn btn-primary" data-toggle="modal">Nueva lista</button>
                    <button id="deleteList" class="btn btn-danger">Borrar lista</button>
                </div>
                    </div>
            </div>
            <div class="span9 tall">
                <div class=" well todoTasks tall">
                    <div style="padding: 10px">
                        <div class="row-fluid">
                            <div id="taskListTitle"></div>
                            <div id="taskList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid" style="
    margin-top: 10px;
">
        <div class="span12" style="float: left">
            <footer>
                <div class="footerblk">
                    <p style="padding:20px; margin: 0">© 2012 <b> TodoList</b><span class="pull-right">IS2</span></p>
                </div>
            </footer>
        </div>
    </div>
</div>
<div id="taskOptions" class="modal hide fade" tabindex="-1" role="dialog"
     aria-labelledby="taskOptions" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="taskOptionsLabel">Titulo</h3>
    </div>
    <div class="modal-body">
        <form class="taskOptionsForm form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputTitle">Título</label>

                <div class="controls">
                    <input type="text" id="inputTitle" placeholder="Titulo">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputDescription">Descripción</label>

                <div class="controls">
                    <textarea rows="3" id="inputDescription" placeholder="Descripcion"></textarea>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputLimitDate">Fecha Límite</label>

                <div class="controls">
                    <input type="text" class="span2" id="inputLimitDay" placeholder="0" size="1"
                           maxlength="2" max="31">
                    <input type="text" class="span2" id="inputLimitMonth" placeholder="0" size="1"
                           maxlength="2" max="12">
                    <input type="text" class="span2" id="inputLimitYear" placeholder="0" size="1"
                           maxlength="4">
                    (0/0/0=sin fecha limite)
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputExpectedDays">Dias esperados</label>

                <div class="controls">
                    <input type="text" class="span3" id="inputExpectedDays" placeholder="0">
                    dias (0=sin dias esperados)
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputCompleted">Completado</label>

                <div class="controls">
                    <input type="checkbox" id="inputCompleted">
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a class="btn btn-danger pull-left" id="removeButton">Borrar Tarea</a>
        <a class="btn" data-dismiss="modal" aria-hidden="true">Cerrar</a>
        <a class="btn btn-primary" id="submitButton">Guardar cambios</a>
    </div>
</div>
<!-- Modal -->
<div id="newList" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="newList"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="newListTitle">Introduzca el nombre de la nueva lista</h3>
    </div>
    <div class="modal-body">
        <form class="newListForm form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputListName">Nombre</label>

                <div class="controls">
                    <input type="text" id="inputListName" placeholder="Nombre">
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cerrar</button>
        <button class="btn btn-primary" id="submitNewListButton">Guardar</button>
    </div>
</div>
<!-- Modal -->
<div id="newTaskModal" class="modal hide fade" tabindex="-1" role="dialog"
     aria-labelledby="newTaskModal" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="newTaskTitle">Indroduzca el nombre de nueva tarea</h3>
    </div>
    <div class="modal-body">
        <form class="newTaskForm form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputTaskName">Nombre</label>

                <div class="controls">
                    <input type="text" id="inputTaskName" placeholder="Nombre">
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cerrar</button>
        <button class="btn btn-primary" id="submitNewTaskButton">Guardar</button>
    </div>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/underscore-min.js"></script>
<script src="js/backbone-min.js"></script>
<script type="text/template" id="taskRowTemplate">
    <% _.each(tasks, function(task) { %>
    <div class="box">
        <div class="task <% if (task.completed) {%>completed<%}else{%>incompleted<%}%>" data-toggle="modal"
             data-name="<%= task.name %>">

            <div>
                <h3><%= task.name %></h3>
                <h4><%= task.limitDate %></h4>
            </div>

        </div>
        <div data-placement="right" rel="tooltip" title="<%= task.limitDate %>" href="#taskOptions" role="button"
             data-name="<%= task.name%>" class="task-desc task"
             data-toggle="modal">
            <div class="favoritesCont">
                <div class="name"><%= task.name %><span class="favicon pull-right"></span> </div>
            </div>
            <div class="desc"><%= task.description %></div>
        </div>
    </div>
    <% }); %>
    <div class="box">
        <div href="#newTaskModal" role="button" class="task completed addTask"
             data-toggle="modal">
            <div>
                <h1 style="font-size : 50px;">+</h1>
            </div>
            </a>
        </div>
    </div>

</script>
<script type="text/template" id="listsNavbar">
    <div class="tall" style="padding:10px">
        <select class="span10" id="dropdownLists">
            <% _.each(lists, function(list) { %>
            <option><%= list.name %></option>
            <% }); %>
        </select>
        <div class="listsLinks">
            <ul class="nav nav-list">
                <% _.each(lists, function(list) { %>
                <li><a class="listElement" href="#"><%= list.name %><input type="checkbox" class="pull-right"/></a>
                <li>
                    <% }); %>
            </ul>
        </div>
    </div>
</script>
<script src="js/general.js"></script>
<script src="js/bootstrap.js"></script>
<script type="text/javascript">

        $('#exportList').click(function(){
            console.log("entra");
            exportLists();
        });

</script>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('http://localhost');
    socket.on('ready',function(){
        socket.on
        socket.emit('newTask', {user : 'fer', taskList : ["44234","fdsfsf"]});
    });

</script>

</body>
</html>